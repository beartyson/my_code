# 1. ä»‹ç»

é›†åˆçš„äº¤å¹¶è¡¥ï¼Œå¯ä»¥ä½¿ç”¨bitä½è¿›è¡Œå‹ç¼©è¡¨ç¤ºï¼Œæé«˜æ€§èƒ½ï¼Œå‡å°‘å­˜å‚¨ç©ºé—´ã€‚ Java ä¸­çš„ `HashSet`ï¼ŒC++ STL ä¸­çš„ `unordered_set`

ç”¨äºŒè¿›åˆ¶ä»ä½åˆ°é«˜è¡¨ç¤ºä¸€ä¸ªæ•°æ˜¯å¦å­˜åœ¨åœ¨é›†åˆä¸­ï¼š*f*(*S*)=*âˆ‘2*i*(*i*âˆˆ*S)

# 2. åŸºç¡€çŸ¥è¯†

 ## 2.1 é›†åˆè¿ç®—

- é›†åˆä¸é›†åˆçš„è¿ç®—ï¼Œ(**å¦‚ä½•é€šè¿‡ä¸€äº›è¿ç®—å¾—åˆ°ç»“æœ**)

ã€Œå¯¹ç§°å·®ã€æŒ‡ä»…åœ¨å…¶ä¸­ä¸€ä¸ªé›†åˆçš„å…ƒç´ 

| æœ¯è¯­         | é›†åˆ               | ä½è¿ç®—                         | ä¸¾ä¾‹                    | ä¸¾ä¾‹                                  |
| ------------ | ------------------ | ------------------------------ | ----------------------- | ------------------------------------- |
| å¯¹ç§°å·®       | *A* Î” *B*          | *a*âŠ•*b*                        | {0,2,3}Î”{0,1,2} = {1,3} | 1101âŠ• 0111= 1010                      |
| æ±‚å·®         | *A*âˆ–*B*            | *a*&âˆ¼*b*                       | {0,2,3}âˆ– {1,2} = {0,3}  | 1101 & 1001 = 1001                    |
| æ±‚å·®ï¼ˆå­é›†ï¼‰ | *A*âˆ–*B*ï¼ˆ*B*âŠ†*A*ï¼‰ | *a*âŠ•*b*                        | {0,2,3}Î”{0,2} = {3}     | 1101âŠ•0101 = 1000                      |
| åˆ¤æ–­åŒ…å«äº   | *A*âŠ†*B*            | *a*&*b*=*a*<br/>ğ‘*a* âˆ£ *b*=*b* |                         | 0101 & 1101=0101<br/>0101 âˆ£ 1101=1101 |

- é›†åˆä¸å…ƒç´ çš„è¿ç®—ï¼Œ(**å¦‚ä½•é€šè¿‡ä¸€äº›è¿ç®—å¾—åˆ°ç»“æœ**)

| æœ¯è¯­                     | é›†åˆ                    | ä½è¿ç®—                       | ä¸¾ä¾‹ | ä¸¾ä¾‹       |
| ------------------------ | ----------------------- | ---------------------------- | ---- | ---------- |
| æ±‚å…¨é›†                   | *U*={0,1,2,â‹¯*n*âˆ’1}      | (1 << *n*)âˆ’1                 |      | (1 << 4)âˆ’1 |
| æ±‚è¡¥é›†                   | âˆ*U**S*=*U*âˆ–*S*         | âˆ¼*s* æˆ–è€…<br/>((1 << ğ‘›)âˆ’1)âŠ•ğ‘  |      |            |
| å…ƒç´ å±äºé›†åˆ             | *i*âˆˆ*S*                 | (ğ‘  >> ğ‘–) & 1=1               |      |            |
| å…ƒç´ ä¸å±äºé›†åˆ           | *i*âˆˆ/*S*                | (*s* >> *i*) & 1=0           |      |            |
| æ·»åŠ å…ƒç´                  | ğ‘†âˆª{ğ‘–}*S*âˆª{*i*}          | ğ‘  âˆ£ (1 << ğ‘–)                 |      |            |
| åˆ é™¤å…ƒç´                  | *S*âˆ–{*i*}               | *s*&âˆ¼(1 << *i*)              |      |            |
| åˆ é™¤å…ƒç´ ï¼ˆä¸€å®šåœ¨é›†åˆä¸­ï¼‰ | *S*âˆ–{*i*}ï¼ˆğ‘–âˆˆğ‘†*i*âˆˆ*S*ï¼‰ | *s*âŠ•(1 << *i*)               |      |            |
| **åˆ é™¤æœ€å°å…ƒç´ **         |                         | *s*&(*s*âˆ’1)                  |      |            |

æœ€å°å…ƒç´ çš„ä½ç½®æ˜¯1ï¼Œå³è¾¹éƒ½æ˜¯0ï¼Œæ‰€ä»¥s-1ï¼Œæœ€å°å…ƒç´ ä½ç½®å˜0ï¼Œå³è¾¹éƒ½æ˜¯1ï¼Œå…¶ä½™ä¸ä¼šå˜

- lowbitï¼Œæ‰¾åˆ°æœ€ä½çš„é‚£ä¸€ä½

     s = 101100
    ~s = 010011
(~s)+1 = 010100 // æ ¹æ®è¡¥ç çš„å®šä¹‰ï¼Œè¿™å°±æ˜¯ **-s  =>  s çš„æœ€ä½ 1 å·¦ä¾§å–åï¼Œå³ä¾§ä¸å˜**
s & -s = 000100 // lowbit

## 2.2 éå†é›†åˆ

è®¾å…ƒç´ èŒƒå›´ä» 0 åˆ° n*âˆ’1ï¼ŒæŒ¨ä¸ªåˆ¤æ–­æ¯ä¸ªå…ƒç´ æ˜¯å¦åœ¨é›†åˆ ğ‘ * ä¸­

```cpp
for (int i = 0; i < n; i++) {
    if ((s >> i) & 1) { // i åœ¨ s ä¸­
        // å¤„ç† i çš„é€»è¾‘
    }
}
```

## 2.3 æšä¸¾é›†åˆ

- è®¾å…ƒç´ èŒƒå›´ä» 0 åˆ° ğ‘›âˆ’1ï¼Œä»ç©ºé›† âˆ… æšä¸¾åˆ°å…¨é›†ğ‘ˆï¼š

```cpp
for (int s = 0; s < (1 << n); s++)
```

- **æšä¸¾**æ‰€æœ‰**éç©ºå­é›†**

```cpp
for (int sub = 0;  sub; sub = (sub-1) & s)
```

æ ¸å¿ƒæ€æƒ³ï¼Œåˆ¨é™¤æ‰€æœ‰é›†åˆä¸­çš„0ï¼Œç›¸å½“äº 111 ->110 -> 101 -> 100

åœ¨ä¸æ–­-1çš„è¿‡ç¨‹ä¸­ï¼Œæœ€å°çš„1å³è¾¹å˜1ï¼Œè‡ªå·±å˜0

- æšä¸¾æ‰€æœ‰å­é›†

```cpp
int sub = s;
do {
    // å¤„ç† sub çš„é€»è¾‘
    sub = (sub - 1) & s;
} while (sub != s);

```

0-1 = -1ï¼Œ ä¸sä¸å°±æ˜¯s

-  Gosper's Hack

æ˜¯ä¸€ç§ç”Ÿæˆ ğ‘› å…ƒé›†åˆæ‰€æœ‰ ğ‘˜ å…ƒå­é›†çš„ç®—æ³•ï¼Œæ±‚ä¸‹ä¸€ä¸ª1çš„æ•°ç›®ç›¸åŒçš„æ•°

```cpp
// lb : lowbit
//x < (1 << k) - 1
while( x < ((1 << n) - 1))

// å·¦åŠ x + lb

// å³åŠ ï¼ˆx ^ (x+lb)ï¼‰// lb >> 2
    
// x = left | right
```



## 2.4 å¼‚æˆ–



# 3. è¯­è¨€ç‰¹æ€§

- è·å¾—æ•°å­—çš„äºŒè¿›åˆ¶ï¼Œä»¥åŠäºŒè¿›åˆ¶ä¸­1çš„ä¸ªæ•°

| æœ¯è¯­                 | Python        | Java                | C++                   | Go                |
| -------------------- | ------------- | ------------------- | --------------------- | ----------------- |
| é›†åˆå¤§å°ï¼ˆå…ƒç´ ä¸ªæ•°ï¼‰ | s.bit_count() | Integer.bitcount(s) | __builtin_popcount(s) | bits.OnesCount(s) |

```python
import math

b = 5
b.bit_count()

bin(b).count('1') '0b100'
```

- äºŒè¿›åˆ¶é•¿åº¦

| æœ¯è¯­                                   | Python           | Java                                 | C++                   | Go            |
| -------------------------------------- | ---------------- | ------------------------------------ | --------------------- | ------------- |
| äºŒè¿›åˆ¶é•¿åº¦ï¼ˆå‡ä¸€å¾—åˆ°é›†åˆä¸­çš„æœ€å¤§å…ƒç´ ï¼‰ | `s.bit_length()` | `32-Integer.numberOfLeadingZeros(s)` | `32-__builtin_clz(s)` | `bits.Len(s)` |

- é›†åˆé›†åˆä¸­çš„æœ€å°å…ƒç´ **åé¢æœ‰å¤šå°‘0**

| æœ¯è¯­             | Python                  | Java                               | C++                | Go                    |
| ---------------- | ----------------------- | ---------------------------------- | ------------------ | --------------------- |
| é›†åˆä¸­çš„æœ€å°å…ƒç´  | `(s&-s).bit_length()-1` | `Integer.numberOfTrailingZeros(s)` | `__builtin_ctz(s)` | bits.TrailingZeros(s) |

è¯·ç‰¹åˆ«æ³¨æ„ 
s=0 çš„æƒ…å†µã€‚å¯¹äº C++ æ¥è¯´ï¼Œ__builtin_clz(0) å’Œ __builtin_ctz(0) æ˜¯æœªå®šä¹‰è¡Œä¸ºã€‚å…¶å®ƒè¯­è¨€è¯·æŸ¥é˜… API æ–‡æ¡£ã€‚

æ­¤å¤–ï¼Œå¯¹äº C++ çš„ long longï¼Œéœ€è¦ä½¿ç”¨ __builtin_popcountll ç­‰ï¼Œå³å‡½æ•°ååç¼€æ·»åŠ  llï¼ˆä¸¤ä¸ªå°å†™å­—æ¯ Lï¼‰ã€‚

`__builtin_clz`æ˜¯GCCå’Œ[Clang](https://so.csdn.net/so/search?q=Clang&spm=1001.2101.3001.7020)ç¼–è¯‘å™¨æä¾›çš„ä¸€ä¸ªå†…ç½®å‡½æ•°ï¼Œç”¨äºè®¡ç®—ä¸€ä¸ªæ•´æ•°çš„äºŒè¿›åˆ¶è¡¨ç¤ºä¸­ï¼Œä»æœ€é«˜ä½å¼€å§‹è¿ç»­çš„0çš„ä¸ªæ•°

[__builtin_ctz*î›ª*](https://www.baidu.com/s?wd=__builtin_ctz&rsv_idx=2&tn=baiduhome_pg&usm=1&ie=utf-8&rsv_pq=a144d7a50003a0af&oq=__builtin_ctz&rsv_t=75dbPDk87jiI6kOYaGNQuUlwtSoMQNh0Z7Ue%2B76ai3cJ816bUxF3grwQEle2e%2BbOwMpl&sa=re_dqa_zy&icon=1)() æ˜¯[GCC*î›ª*](https://www.baidu.com/s?wd=GCC&rsv_idx=2&tn=baiduhome_pg&usm=1&ie=utf-8&rsv_pq=a144d7a50003a0af&oq=__builtin_ctz&rsv_t=75dbPDk87jiI6kOYaGNQuUlwtSoMQNh0Z7Ue%2B76ai3cJ816bUxF3grwQEle2e%2BbOwMpl&sa=re_dqa_zy&icon=1)å’Œ[Clang*î›ª*](https://www.baidu.com/s?wd=Clang&rsv_idx=2&tn=baiduhome_pg&usm=1&ie=utf-8&rsv_pq=a144d7a50003a0af&oq=__builtin_ctz&rsv_t=75dbPDk87jiI6kOYaGNQuUlwtSoMQNh0Z7Ue%2B76ai3cJ816bUxF3grwQEle2e%2BbOwMpl&sa=re_dqa_zy&icon=1)ç¼–è¯‘å™¨æä¾›çš„ä¸€ç³»åˆ—å†…ç½®å‡½æ•°ï¼Œç”¨äºè®¡ç®—ä¸€ä¸ªæ•´æ•°çš„äºŒè¿›åˆ¶è¡¨ç¤ºä¸­ä»æœ€ä½ä½ï¼ˆå³äºŒè¿›åˆ¶è¡¨ç¤ºçš„æœ€åä¸€ä½ï¼‰å¼€å§‹è¿ç»­çš„0çš„ä¸ªæ•°

